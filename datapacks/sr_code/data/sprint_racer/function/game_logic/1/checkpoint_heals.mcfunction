#calculate how much less hp we have than our max
scoreboard players operation #dHP value = @s hp
scoreboard players operation #dHP value -= @s cStatHP

#heals
execute if score @s cStatCPHeal matches 1..3 run effect give @s regeneration 1 2 true
execute if score @s cStatCPHeal matches 4 run effect give @s instant_health 1 0 true
execute if score @s cStatCPHeal matches 5..8 run effect give @s instant_health 2 0 true
execute if score @s cStatCPHeal matches 9..12 run effect give @s instant_health 3 0 true
execute if score @s cStatCPHeal matches 13.. run effect give @s instant_health 100 0 true

#limit the numbers based on stats
execute if score @s cStatCPHeal matches 1..3 if score #dHP value matches ..-2 run scoreboard players set #dHP value -1
execute if score @s cStatCPHeal matches 4 if score #dHP value matches ..-5 run scoreboard players set #dHP value -4
execute if score @s cStatCPHeal matches 5..8 if score #dHP value matches ..-9 run scoreboard players set #dHP value -8
execute if score @s cStatCPHeal matches 9..12 if score #dHP value matches ..-13 run scoreboard players set #dHP value -12
execute if score @s cStatCPHeal matches 13.. if score #dHP value matches ..-21 run scoreboard players set #dHP value -20

#numbers based on #dHP
execute if score #dHP value matches ..-20 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+20",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -19 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+19",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -18 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+18",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -17 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+17",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -16 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+16",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -15 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+15",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -14 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+14",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -13 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+13",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -12 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+12",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -11 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+11",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -10 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+10",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -9 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+9",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -8 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+8",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -7 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+7",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -6 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+6",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -5 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+5",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -4 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+4",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -3 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+3",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -2 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+2",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute if score #dHP value matches -1 run summon text_display ~ ~1.8 ~ {alignment:center,text:{text:"+1",color:"light_purple",bold:true},Tags:["setscore","health_text"],billboard:"center",teleport_duration:20,shadow:1b,see_through:1b,brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[2f,2f,2f]},background:0}
execute as @e[tag=setscore,distance=..3] run function sprint_racer:damage_logic/damage_number_entity